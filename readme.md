
# ソースコード貼り付け用のマークダウン生成スクリプト

このスクリプトは、指定されたディレクトリ内のソースコードファイルをマークダウン形式に変換し、クリップボードにコピーします。また、オプションでソースコード定義書やデバッグドキュメントの生成も可能です。

## 使い方

```bash
python codeland.py <ディレクトリ> <拡張子> [オプション]
```

- `<ディレクトリ>`: ソースコードファイルが含まれるディレクトリのパス
- `<拡張子>`: 対象とするファイルの拡張子（例: .py）。すべてのファイルを対象とする場合は `all` を指定
- `[オプション]`:
  - `-c`, `--create-docs`: ソースコード定義書を生成する
  - `-d`, `--debug`: デバッグドキュメントを生成する
  - `-p`, `--paste`: マークダウン出力をクリップボードにコピーする

## 機能

- 指定されたディレクトリ内を再帰的に探索し、指定された拡張子に一致するファイルを見つけます。
- 各ファイルの内容をマークダウン形式に変換します。
  - ファイルのパスをヘッダーとして追加
  - ファイルの内容をコードブロック内に配置
- オプションでマークダウン出力をクリップボードにコピーします。
- オプションでソースコード定義書を生成します。
- オプションでデバッグドキュメントを生成します。

## 注意事項

- スクリプト自体のファイルは除外されます。
- テキスト形式のファイルのみが処理対象となります。
- ファイルの読み込みでエラーが発生した場合は、エラーメッセージがマークダウンに含まれます。
- `.codeignore` ファイルを使用して、無視するディレクトリを指定できます。
- ソースコード定義書およびデバッグドキュメントの生成には、OpenAIのAPIキーが必要です。

## 使用例

```bash
python files_to_paste.py /path/to/your/code/ .py -p -c -d
```

上記のコマンドを実行すると、`/path/to/your/code/` ディレクトリ内の `.py` ファイルがマークダウン形式に変換され、クリップボードにコピーされます。また、ソースコード定義書とデバッグドキュメントも生成されます。

## `.codeignore` の使用方法

`.codeignore` ファイルを使用して、無視するディレクトリを指定できます。以下のように、無視したいディレクトリ名を1行ずつ記述してください。

```ignore
ignored_directory1
ignored_directory2
```

## 依存ライブラリ

- `pyperclip`: クリップボード操作用のライブラリ
- `openai`: OpenAI APIを使用するためのライブラリ
- `python-dotenv`: 環境変数を読み込むためのライブラリ

## インストール方法

必要なライブラリは、pipを使用して以下のようにインストールできます。

```bash
pip install pyperclip openai python-dotenv
```

## 環境変数の設定

ソースコード定義書およびデバッグドキュメントの生成には、OpenAIのAPIキーが必要です。以下の手順で環境変数を設定してください。

1. `.codeenv` ファイルをスクリプトと同じディレクトリに作成します。
2. `.codeenv` ファイルに以下の内容を記述します。

```env
OPENAI_API_KEY=your_api_key
OPENAI_MODEL=version_of_model
```

`your_api_key` は、実際のOpenAI APIキーに置き換えてください。`version_of_model` は、使用するモデルのバージョンに置き換えてください。

## 動作環境

- Python 3.x 以上
